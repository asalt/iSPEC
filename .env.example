# Example environment configuration for the iSPEC toolkit.
# Copy this file to `.env` (or export the variables another way) and adjust the
# paths for your deployment.

# Base directory where SQLite database files are stored.
ISPEC_DB_DIR=/var/lib/ispec

# Optional explicit path to the primary SQLite database file. When left
# commented, iSPEC defaults to "$ISPEC_DB_DIR/ispec.db".
#ISPEC_DB_PATH=/var/lib/ispec/ispec.db

# Directory for log files written by the logging helpers and CLI commands.
ISPEC_LOG_DIR=/var/log/ispec

# Location for the JSON logging configuration managed by `ispec logging`.
ISPEC_CONFIG_DIR=/etc/ispec
ISPEC_LOG_CONFIG=/etc/ispec/logging.json

# Directory used by the API CLI to persist state about running servers.
ISPEC_STATE_DIR=/var/lib/ispec/state

# Optional override for the API server state file path.
#ISPEC_API_STATE_FILE=/var/lib/ispec/state/api_server.json

# ---------------------------------------------------------------------------
# API security + exposure controls
# ---------------------------------------------------------------------------

# Optional shared API key for the FastAPI service.
# When set, requests must include either:
#   - X-API-Key: <value>
#   - Authorization: Bearer <value>
#
# The CLI refuses to start the API bound to a non-local interface unless this
# is set (e.g. --host 0.0.0.0).
#ISPEC_API_KEY=change-me

# When truthy, return 503 if ISPEC_API_KEY is not set.
#ISPEC_API_REQUIRE_KEY=1

# Comma-separated list of resource prefixes to expose (without leading slash).
# Use "all" or "*" to expose everything wired into the API router.
# Defaults to: projects,people,project_comment
#ISPEC_API_RESOURCES=projects,people,project_comment

# Set to 0 to disable legacy root routes like /projects (keep only /api/projects).
#ISPEC_API_LEGACY_ROOT_ROUTES=0

# Comma-separated list of allowed CORS origins for browser clients.
# Defaults include localhost + 127.0.0.1 for ports 3000 and 5173.
#ISPEC_CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# Allow cookies/credentials in CORS (only enable when you intentionally use
# cookie-based auth).
#ISPEC_CORS_ALLOW_CREDENTIALS=1

# Require users to log in (cookie session) for protected CRUD routes.
#ISPEC_REQUIRE_LOGIN=1

# Optional dev-only bootstrap user (creates admin/admin when no users exist).
# Do NOT enable this in shared environments unless you also set ISPEC_API_KEY.
#ISPEC_DEV_DEFAULT_ADMIN=1
#ISPEC_DEV_ADMIN_USERNAME=admin
#ISPEC_DEV_ADMIN_PASSWORD=admin

# PBKDF2 password hashing settings
#ISPEC_PASSWORD_PEPPER=change-me-too
#ISPEC_PASSWORD_ITERATIONS=250000

# Cookie session settings
#ISPEC_SESSION_COOKIE_NAME=ispec_session
#ISPEC_SESSION_TTL_SECONDS=43200
#ISPEC_SESSION_COOKIE_SAMESITE=lax
#ISPEC_SESSION_COOKIE_SECURE=0
